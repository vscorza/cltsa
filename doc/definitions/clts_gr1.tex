\textcolor{blue}{In the present work} controller synthesis is applied to specifications where the environment behavior is defined by a set of CLTS instances and games structures. The properties to be satisfied by the specification fall into the GR(1) category and are expressed as LTL formulas.

Since the goal $\varphi$ is restricted to GR(1) formulas we will follow what has been done with LTS based specifications in \cite{DBLP:phd/ethos/DIppolito13}. A translation between CLTS control problems and GR(1) games, and one from strategies into CLTS controller are presented, yielding a framework for CLTS GR(1) control problem synthesis. The GR(1) games used here and in in \cite{DBLP:phd/ethos/DIppolito13} are the same.

\begin{definition}\label{def:gr1_clts_control_problem} \emph{(GR(1) CLTS control problem)} 
	Let $I = \langle E, \mathcal{C}, \mathcal{F}, \varphi \rangle$ be a CLTS control problem, $I$ is a GR(1) CLTS control problem if $\varphi$ satisfies: 
	\[\varphi = (\bigwedge_{i=1}^k\square \Diamond \gamma_i \implies \bigwedge_{j=1}^l\square \Diamond \psi_j)\]
	In the previous definition $\gamma_1, \ldots , \gamma_k$, $\psi_1, \ldots , \psi_l$ are propositional LTL formulas over fluents that represent a set of assumptions over the environment and a set of guarantees the system should satisfy.
\end{definition}

\begin{definition}\label{def:clts_to_gr1_translation} \emph{(GR(1) CLTS control problem to GR(1) game translation)} 
For $I = \langle E, \mathcal{C}, \mathcal{F}=\lbrace fl_1, \ldots, fl_{k+l} \rbrace, \varphi \rangle$ a GR(1) CLTS control problem $gr1(I)=G$ is a GR(1) game $G = \langle S_g,$ $\Gamma^-,$ $\Gamma^+,s_{g_0}\varphi \rangle$ where $S_g = S_e \times \mathbb{B}^{k+l}$ is the set of states and for a state $s_g=(s_e,\alpha_1,\ldots,\alpha_{k+l}) \in S_g$ a fluent
$fl_i$ is said to be satisfied at $s_g$ if and only if $\alpha_i$ is true.
$s_{g_0}=(s_0,Init_1,\ldots,Init_{k+l})$ is the initial state and for every $(s,l,s')\in \Delta_e$, $()s_g,(s'_e,\alpha'_1,\ldots,\alpha'_{k+l}))$ is added to $\Gamma^-$ if $l \in \mathcal{P}(\mathcal{U})$ or $\Gamma^+$ if $l \in \mathcal{P}(\mathcal{C})$, $\alpha'_i$ is set as follows:
\[
\alpha'_i = \begin{cases}
\alpha_i & \text{if } l \notin I_{fl_i} \cup T_{fl_i} \\
\top & \text{if } l \in I_{fl_i}\\
\bot & \text{if } l \in T_{fl_i}
\end{cases}
\]
\end{definition}

If the game $G$ constructed when applying $gr1$ on $I$ is realizable, i.e. if there exists a winning strategy for the system that satisfies $\varphi$ over $G$, then such a strategy can be encoded as a pair of functions $\sigma
$ and $u$. Since $G$ is memory dependent the strategy is split into the function $\sigma$ that picks a successor for any given controllable and reachable state  and $u$ that updates the memory in order to keep track of the guarantee that needs to be satisfied next. 

For a pair $(\sigma,u)$, a controller $M$ is constructed, in order to describe how $M$ is built we define when a transition that follows a winning strategy while preserving legality with respect to a an automaton $E$ is possible.

\begin{definition}\label{def:strat_possible_transition} \emph{(Possible transition)} 
	Let $I = \langle E, \mathcal{C}, \mathcal{F}, \varphi \rangle$ be a CLTS control problem and $G = \langle S_g, \Gamma^-,\Gamma^+,s_{g_0}\varphi \rangle$ be the result of $gr1(I)$, for $s_g=(s_e,\alpha_1,\ldots,\alpha_{k+l}) \in S_g$ and $s'_g=(s'_e,\alpha'_1,\ldots,\alpha'_{k+l}) \in S_g$, action $l \in \mathcal{P}(\Sigma_e)$ is said to be possible if the following condition si satisfied:
	\[possible(s_g,l,s'_g):\forall (s_g,s'_g) \in \Gamma^- \cup \Gamma^+: \exists (s_e,l,s'_e) \in \Delta_e \implies \]
	\[ \forall fl_i \in \mathcal{F}: ((l \cap (I_{fl_i} \cup T_{fl_i} = \emptyset)) \vee (I_{fl_i} \subseteq l \wedge \alpha'_i = \top)\vee (T_{fl_i} \subseteq l \wedge \alpha'_i = \bot))\]
\end{definition}

\begin{definition}\label{def:strat_to_clts_translation} \emph{(Winning strategy to CLTS translation)} 
	Let $f=(\sigma,u)$ with $\sigma:\Omega \times S_g \rightarrow 2^{|S_g|}$ and
	$u:\Omega \rightarrow \Omega$ be a winning strategy for $G = \langle S_g, \Gamma^-,\Gamma^+,s_{g_0}\varphi \rangle$, $clts(f)=M$ is a CLTS instance $M=\langle S_m, \Sigma_m, \Delta_m, s_{0_m}\rangle$ where $S_m \subseteq \Omega \times S_g$ is the set of states
	and $\Delta_m \subseteq S_m \times \mathcal{P}(\Sigma_m) \times S_m$ is the minimal transition relation satisfying the following condition:
	\[\forall s'_g \in S_g: (\exists \omega \in \Omega, (s_g,s'_g) \in (\Gamma^- \cup \Gamma^+), l \in \mathcal{P}(\Sigma_e) \wedge possible(s_g,l,s'_g) \implies \] \[(((\omega,s_g),l,(u(\omega),s'_g))\in \Delta_m) \]
\end{definition}