const N = 2
const K = 2

range R_N  = 0..(N-1)
range R_K = 0..(N-1)

/*****************************************************************************/
set Global_Alphabet = {request[n:R_N][k:R_K],grant[n:R_N][k:R_K],idle[n:R_N]}
set Controllable_Alphabet = {grant[n:R_N][k:R_K]}


CLIENT[n:R_N] = (request[n][k:R_K]-> grant[n][k] ->CLIENT[n] | idle[n] -> CLIENT[n]).
SERVER[n:R_N] = (request[n][k:R_K]-> grant[n][k] -> SERVER[n]).


||CLIENTS = (CLIENT[n:R_N]).
||SERVERS = (SERVER[n:R_N]).

||SERVERS_C = (SERVER[n:R_N]_c).
||Plant = (CLIENTS || SERVERS).
|F|ENV = (Plant).

fluent ASSUMPTION[n:R_N][k:R_K] = <request[n][k], idle[n]>
fluent GOAL[n:R_N][k:R_K] = <grant[n][k], idle[n]>

|gr1| <{ASSUMPTION[n:R_N][k:R_K]}><{GOAL[n:R_N][k:R_K]}>  STRAT = ENV.


CLIENT_0 >> "/tmp/ranges_7_client_0.rep".
SERVER_1 >> "/tmp/ranges_7_server_1.rep".
CLIENTS >> "/tmp/ranges_7_clients.rep".
SERVERS >> "/tmp/ranges_7_servers.rep".
SERVERS_C >> "/tmp/ranges_7_servers_c.rep".
ENV >> "/tmp/ranges_7_env.rep".
STRAT >> "/tmp/ranges_7_strat.rep".

CLIENTS_P = S_0,
S_0 = (request_1_0-> S_1|request_1_1-> S_2|idle_1-> S_0|request_0_0-> S_3|request_0_1-> S_4|idle_0-> S_0),
S_1 = (grant_1_0-> S_0|request_0_0-> S_7|request_0_1-> S_5|idle_0-> S_1),S_2 = (grant_1_1-> S_0|request_0_0-> S_8|request_0_1-> S_6|idle_0-> S_2),
S_3 = (request_1_0-> S_7|request_1_1-> S_8|idle_1-> S_3|grant_0_0-> S_0),S_4 = (request_1_0-> S_5|request_1_1-> S_6|idle_1-> S_4|grant_0_1-> S_0),
S_5 = (grant_1_0-> S_4|grant_0_1-> S_1),S_6 = (grant_1_1-> S_4|grant_0_1-> S_2),S_7 = (grant_1_0-> S_3|grant_0_0-> S_1),
S_8 = (grant_1_1-> S_3|grant_0_0-> S_2).

STRAT_P= S_0,
S_0 = (idle_0-> S_0|idle_1-> S_0|request_0_0-> S_1|request_0_1-> S_2|request_1_0-> S_3|request_1_1-> S_4),
S_1 = (idle_1-> S_1|request_1_0-> S_5|request_1_1-> S_7),
S_2 = (idle_1-> S_2|request_1_0-> S_6|request_1_1-> S_8),
S_3 = (idle_0-> S_3|request_0_0-> S_5|request_0_1-> S_6),
S_4 = (idle_0-> S_4|request_0_0-> S_7|request_0_1-> S_8),
S_5 = (grant_1_0-> S_1),
S_6 = (grant_1_0-> S_2),
S_7 = (grant_1_1-> S_1),
S_8 = (grant_1_1-> S_2).

SERVERS_C_P = S_0,
S_0 = (request_1_0-> S_1|request_1_1-> S_2|request_0_0-> S_3|<request_0_0,request_1_0>-> S_4|<request_0_0,request_1_1>-> S_5|request_0_1-> S_6|<request_0_1,request_1_0>-> S_7|<request_0_1,request_1_1>-> S_8),
S_1 = (grant_1_0-> S_0|request_0_0-> S_4|<grant_1_0,request_0_0>-> S_3|request_0_1-> S_7|<grant_1_0,request_0_1>-> S_6),
S_2 = (grant_1_1-> S_0|request_0_0-> S_5|<grant_1_1,request_0_0>-> S_3|request_0_1-> S_8|<grant_1_1,request_0_1>-> S_6),
S_3 = (request_1_0-> S_4|request_1_1-> S_5|grant_0_0-> S_0|<grant_0_0,request_1_0>-> S_1|<grant_0_0,request_1_1>-> S_2),
S_4 = (grant_1_0-> S_3|grant_0_0-> S_1|<grant_0_0,grant_1_0>-> S_0),S_5 = (grant_1_1-> S_3|grant_0_0-> S_2|<grant_0_0,grant_1_1>-> S_0),
S_6 = (request_1_0-> S_7|request_1_1-> S_8|grant_0_1-> S_0|<grant_0_1,request_1_0>-> S_1|<grant_0_1,request_1_1>-> S_2),
S_7 = (grant_1_0-> S_6|grant_0_1-> S_1|<grant_0_1,grant_1_0>-> S_0),S_8 = (grant_1_1-> S_6|grant_0_1-> S_2|<grant_0_1,grant_1_1>-> S_0).

equals FATAL_RANGE_7_STRAT(STRAT, STRAT_P).
equals FATAL_RANGE_7_CLIENTS(CLIENTS, CLIENTS_P).
equals FATAL_RANGE_7_SERVERS_C(SERVERS_C, SERVERS_C_P).



