//GenBuf example taken from Synthesis of Reactive(1) Designs 2 senders
set Global_Alphabet = {}
set Controllable_Alphabet = {}

set Global_Signals	= {enq, deq, full, empty, slc_0}
set Output_Signals	= {enq, deq, slc_0}
order			= {full < empty < slc_0 < enq < deq}

/***********
**** THETA
***********/
ltl env theta Init_Buffer_e in GENBUF	= (!full && empty && !slc_0).
ltl sys theta Init_Buffer_s in GENBUF	= (!enq && !deq).
/***********
**** SYS RHO
***********/
//bToS_ACK only if sToB_REQ
//restrict eng/deq operations
ltl sys rho G_11_1 in GENBUF			= []((full && !deq)-> !enq).
ltl sys rho G_11_1_X in GENBUF			= [](X((full && !deq)-> !enq)).
ltl sys rho G_11_2 in GENBUF			= [](empty-> !deq).
ltl sys rho G_11_2_X in GENBUF			= [](X(empty-> !deq)).

//if sToB_REQ and not full then should ENQ
ltl sys rho G_13 in GENBUF			= [](!full -> (enq || X(enq))).

/***********
**** ENV RHO
***********/
//keep empty / full fixed if deq == enq
ltl env rho A_5_1 in GENBUF			= []((deq <-> enq) -> (empty <-> X(empty))).
ltl env rho A_5_2 in GENBUF			= []((deq <-> enq) -> (full <-> X(full))).
ltl env rho A_5_3 in GENBUF			= []((enq && !deq) -> !X(empty)).
ltl env rho A_5_4 in GENBUF			= []((deq && !enq) -> !X(full)).


/***********
**** AUTOMATA
***********/
//G_7 was turned into an automaton
//G_7_ROUND_ROBIN	= (bToR_REQ_0.on -> bToR_REQ_1.on -> G_7_ROUND_ROBIN).

/***********
**** FLUENTS
***********/
//G_12 was turned into a fluent
fluent F_Goal_12 = <{deq.on,empty.on}, empty.off> initially 1


ltl fluent A_1		= (empty).
ltl fluent A_2		= (full).

/***********
**** SYNTHESIS
***********/
|f| ENV =(GENBUF).
|gr1| <{A_1,A_2}><{F_Goal_12}> STRAT = ENV.

STRAT_p = S_0,
S_0 = (empty.on-> S_1),
S_1 = (<>-> S_2),
S_2 = (<>-> S_3),
S_3 = (enq.on-> S_4|<enq.on,slc_0.on>-> S_5),
S_4 = (empty.off-> S_6|<empty.off,full.on>-> S_7),
S_5 = (empty.off-> S_8|<empty.off,full.on>-> S_9),
S_6 = (enq.off-> S_10|<enq.off,slc_0.on>-> S_11|<>-> S_12|slc_0.on-> S_13|<deq.on,enq.off>-> S_14|deq.on-> S_15|<deq.on,enq.off,slc_0.on>-> S_16|<deq.on,slc_0.on>-> S_17),
S_7 = (enq.off-> S_18|<enq.off,slc_0.on>-> S_19|<deq.on,enq.off>-> S_20|deq.on-> S_21|<deq.on,enq.off,slc_0.on>-> S_22|<deq.on,slc_0.on>-> S_23),
S_8 = (<enq.off,slc_0.off>-> S_10|enq.off-> S_11|slc_0.off-> S_12|<>-> S_13|<deq.on,enq.off,slc_0.off>-> S_14|<deq.on,slc_0.off>-> S_15|<deq.on,enq.off>-> S_16|deq.on-> S_17),
S_9 = (<enq.off,slc_0.off>-> S_18|enq.off-> S_19|<deq.on,enq.off,slc_0.off>-> S_20|<deq.on,slc_0.off>-> S_21|<deq.on,enq.off>-> S_22|deq.on-> S_23),
S_10 = (<>-> S_54),
S_11 = (<>-> S_55),
S_12 = (<>-> S_56|full.on-> S_57),
S_13 = (<>-> S_58|full.on-> S_59),
S_14 = (<>-> S_48|empty.on-> S_49),
S_15 = (<>-> S_50),
S_16 = (<>-> S_51|empty.on-> S_52),
S_17 = (<>-> S_53),
S_18 = (<>-> S_24),
S_19 = (<>-> S_25),
S_20 = (full.off-> S_26|<empty.on,full.off>-> S_27),
S_21 = (<>-> S_28),
S_22 = (full.off-> S_29|<empty.on,full.off>-> S_30),
S_23 = (<>-> S_31),
S_24 = (<>-> S_18|slc_0.on-> S_19|deq.on-> S_20|<deq.on,enq.on>-> S_21|<deq.on,slc_0.on>-> S_22|<deq.on,enq.on,slc_0.on>-> S_23),
S_25 = (slc_0.off-> S_18|<>-> S_19|<deq.on,slc_0.off>-> S_20|<deq.on,enq.on,slc_0.off>-> S_21|deq.on-> S_22|<deq.on,enq.on>-> S_23),
S_26 = (deq.off-> S_36|<deq.off,slc_0.on>-> S_37|<deq.off,enq.on>-> S_38|<deq.off,enq.on,slc_0.on>-> S_39|<>-> S_14|enq.on-> S_15|slc_0.on-> S_16|<enq.on,slc_0.on>-> S_17),
S_27 = (deq.off-> S_2|<deq.off,slc_0.on>-> S_40|<deq.off,enq.on>-> S_4|<deq.off,enq.on,slc_0.on>-> S_5),
S_28 = (<deq.off,enq.off>-> S_32|<deq.off,enq.off,slc_0.on>-> S_33|enq.off-> S_20|<>-> S_21|<enq.off,slc_0.on>-> S_22|slc_0.on-> S_23),
S_29 = (<deq.off,slc_0.off>-> S_36|deq.off-> S_37|<deq.off,enq.on,slc_0.off>-> S_38|<deq.off,enq.on>-> S_39|slc_0.off-> S_14|<enq.on,slc_0.off>-> S_15|<>-> S_16|enq.on-> S_17),
S_30 = (<deq.off,slc_0.off>-> S_2|deq.off-> S_40|<deq.off,enq.on,slc_0.off>-> S_4|<deq.off,enq.on>-> S_5),
S_31 = (<deq.off,enq.off,slc_0.off>-> S_32|<deq.off,enq.off>-> S_33|<enq.off,slc_0.off>-> S_20|slc_0.off-> S_21|enq.off-> S_22|<>-> S_23),
S_32 = (<>-> S_34),
S_33 = (<>-> S_35),
S_34 = (<>-> S_32|slc_0.on-> S_33|deq.on-> S_20|<deq.on,enq.on>-> S_21|<deq.on,slc_0.on>-> S_22|<deq.on,enq.on,slc_0.on>-> S_23),
S_35 = (slc_0.off-> S_32|<>-> S_33|<deq.on,slc_0.off>-> S_20|<deq.on,enq.on,slc_0.off>-> S_21|deq.on-> S_22|<deq.on,enq.on>-> S_23),
S_36 = (<>-> S_42),
S_37 = (<>-> S_43),
S_38 = (<>-> S_44|full.on-> S_45),
S_39 = (<>-> S_46|full.on-> S_47),
S_40 = (<>-> S_41),
S_41 = (<enq.on,slc_0.off>-> S_4|enq.on-> S_5),
S_42 = (enq.on-> S_38|<enq.on,slc_0.on>-> S_39|<deq.on,enq.on>-> S_15|<deq.on,enq.on,slc_0.on>-> S_17),
S_43 = (<enq.on,slc_0.off>-> S_38|enq.on-> S_39|<deq.on,enq.on,slc_0.off>-> S_15|<deq.on,enq.on>-> S_17),
S_44 = (enq.off-> S_36|<enq.off,slc_0.on>-> S_37|<>-> S_38|slc_0.on-> S_39|<deq.on,enq.off>-> S_14|deq.on-> S_15|<deq.on,enq.off,slc_0.on>-> S_16|<deq.on,slc_0.on>-> S_17),
S_45 = (enq.off-> S_32|<enq.off,slc_0.on>-> S_33|<deq.on,enq.off>-> S_20|deq.on-> S_21|<deq.on,enq.off,slc_0.on>-> S_22|<deq.on,slc_0.on>-> S_23),
S_46 = (<enq.off,slc_0.off>-> S_36|enq.off-> S_37|slc_0.off-> S_38|<>-> S_39|<deq.on,enq.off,slc_0.off>-> S_14|<deq.on,slc_0.off>-> S_15|<deq.on,enq.off>-> S_16|deq.on-> S_17),
S_47 = (<enq.off,slc_0.off>-> S_32|enq.off-> S_33|<deq.on,enq.off,slc_0.off>-> S_20|<deq.on,slc_0.off>-> S_21|<deq.on,enq.off>-> S_22|deq.on-> S_23),
S_48 = (<deq.off,enq.on>-> S_38|<deq.off,enq.on,slc_0.on>-> S_39|enq.on-> S_15|<enq.on,slc_0.on>-> S_17),
S_49 = (<deq.off,enq.on>-> S_4|<deq.off,enq.on,slc_0.on>-> S_5),
S_50 = (<deq.off,enq.off>-> S_36|<deq.off,enq.off,slc_0.on>-> S_37|deq.off-> S_38|<deq.off,slc_0.on>-> S_39|enq.off-> S_14|<>-> S_15|<enq.off,slc_0.on>-> S_16|slc_0.on-> S_17),
S_51 = (<deq.off,enq.on,slc_0.off>-> S_38|<deq.off,enq.on>-> S_39|<enq.on,slc_0.off>-> S_15|enq.on-> S_17),
S_52 = (<deq.off,enq.on,slc_0.off>-> S_4|<deq.off,enq.on>-> S_5),
S_53 = (<deq.off,enq.off,slc_0.off>-> S_36|<deq.off,enq.off>-> S_37|<deq.off,slc_0.off>-> S_38|deq.off-> S_39|<enq.off,slc_0.off>-> S_14|slc_0.off-> S_15|enq.off-> S_16|<>-> S_17),
S_54 = (enq.on-> S_12|<enq.on,slc_0.on>-> S_13|<deq.on,enq.on>-> S_15|<deq.on,enq.on,slc_0.on>-> S_17),
S_55 = (<enq.on,slc_0.off>-> S_12|enq.on-> S_13|<deq.on,enq.on,slc_0.off>-> S_15|<deq.on,enq.on>-> S_17),
S_56 = (enq.off-> S_10|<enq.off,slc_0.on>-> S_11|<>-> S_12|slc_0.on-> S_13|<deq.on,enq.off>-> S_14|deq.on-> S_15|<deq.on,enq.off,slc_0.on>-> S_16|<deq.on,slc_0.on>-> S_17),
S_57 = (enq.off-> S_18|<enq.off,slc_0.on>-> S_19|<deq.on,enq.off>-> S_20|deq.on-> S_21|<deq.on,enq.off,slc_0.on>-> S_22|<deq.on,slc_0.on>-> S_23),
S_58 = (<enq.off,slc_0.off>-> S_10|enq.off-> S_11|slc_0.off-> S_12|<>-> S_13|<deq.on,enq.off,slc_0.off>-> S_14|<deq.on,slc_0.off>-> S_15|<deq.on,enq.off>-> S_16|deq.on-> S_17),
S_59 = (<enq.off,slc_0.off>-> S_18|enq.off-> S_19|<deq.on,enq.off,slc_0.off>-> S_20|<deq.on,slc_0.off>-> S_21|<deq.on,enq.off>-> S_22|deq.on-> S_23).

// tests
equals FATAL_Genbuf_2_Sndrs_Debug(STRAT,STRAT_p).
