const N = 2
const K = 2

const Philosophers = N
const Steps = K

range R_Phil = 0..Philosophers-1
range R_Steps = 1..Steps

set Global_Alphabet = {think[r:R_Phil], step[r:R_Phil], take[r:R_Phil][c:R_Phil], release[r:R_Phil][c:R_Phil],eat[r:R_Phil],eat_all}
set Controllable_Alphabet = {take[r:R_Phil][c:R_Phil]}

/*****************************************************************************/

Philosopher_0 = Idle,
  Idle = (think_0 -> Hungry),
  Hungry = (take_0_0 -> Etiquete[Steps]),
  Etiquete[s:R_Steps] = (step_0 -> Etiquete[s-1]),
  Etiquete_0 =  (take_0_1 -> eat_0 -> release_0_0 -> release_0_1 -> Idle).
Philosopher_1 = Idle,
  Idle = (think_1 -> Hungry),
  Hungry = (take_1_1 -> Etiquete[Steps]),
  Etiquete[s:R_Steps] = (step_1 -> Etiquete[s-1]),
  Etiquete_0 = (take_1_0 -> eat_1 -> release_1_1 -> release_1_0 -> Idle).

Fork_0 = OnTable,
  OnTable = (take_1_0     -> OnHand  |  take_0_0    -> OnHand  ),
  OnHand  = (release_1_0  -> OnTable |  release_0_0 -> OnTable ).
Fork_1 = OnTable,
  OnTable = (take_0_1     -> OnHand  |  take_1_1    -> OnHand  ),
  OnHand  = (release_0_1  -> OnTable |  release_1_1 -> OnTable ).

Monitor_0 = (eat_0 -> Done),
  Done = (eat_0 -> Done | eat_all -> Monitor_0).
Monitor_1 = (eat_1 -> Done),
  Done = (eat_1 -> Done | eat_all -> Monitor_1).
Monitor_0_remove = (eat_0 -> Done),
  Done = (eat_0 -> Done).
Monitor_1_remove = (eat_1 -> Done),
  Done = (eat_1 -> Done).

/*****************************************************************************/

||Plant = (Philosopher_0 || Philosopher_1 || Fork_0 ||  Fork_1 || Monitor_0 || Monitor_1).
||Plant_1 = (Philosopher_0 || Philosopher_1 || Fork_0 ||  Fork_1).
||Plant_0 = (Philosopher_0 || Fork_0).

||Plant_remove = (Philosopher_0 || Philosopher_1 || Fork_0 ||  Fork_1 || Monitor_0_remove || Monitor_1_remove).
/*****************************************************************************/


fluent F_Ass = <eat_all, eat[r:R_Phil]> initially 1
fluent F_GOAL = <eat_all, eat[r:R_Phil]>

|F| ENV = (Plant).
|F| REMOVE_ENV = (Plant_remove).

Philosopher_0 >> "/tmp/DP_2_2_ph_0.rep".
Fork_0 >> "/tmp/DP_2_2_f_0.rep".

Plant_1 >> "/tmp/DP_2_2_plant_1.rep".
Plant_0 >> "/tmp/DP_2_2_plant_0.rep".

|gr1| <{F_Ass}><{F_GOAL}>  STRAT = ENV.
|gr1| <{}><{F_GOAL}>  NO_STRAT = ENV.
|gr1| <{}><{F_GOAL}>  REMOVE_NO_STRAT = REMOVE_ENV.
//STRAT >> "/tmp/TL_4_2_strat.rep".
STRAT >>_m "/tmp/DP_2_2_strat.met".
STRAT >> "/tmp/DP_2_2_strat.rep".
NO_STRAT >>_m "/tmp/DP_2_2_diag.met".
NO_STRAT >> "/tmp/DP_2_2_diag.rep".
REMOVE_NO_STRAT >>_m "/tmp/DP_2_2_remove_diag.met".
REMOVE_NO_STRAT >> "/tmp/DP_2_2_remove_diag.rep".

ENV >> "/tmp/DP_2_2_env.rep".
ENV >>_m "/tmp/DP_2_2_env.met".

